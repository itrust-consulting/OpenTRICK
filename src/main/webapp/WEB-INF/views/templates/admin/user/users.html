<div class="tab-pane" id="tab-user">
    <div class="section" id="section_user">
        <div th:if="${not #lists.isEmpty(users)}">
            <ul class="nav nav-pills bordered-bottom" id="menu_user">
                <li data-trick-ignored="true">
                    <a href="#" onclick="return newUser();">
                        <span class="glyphicon glyphicon-plus primary"></span>
                        <span th:text="#{label.action.add}">Add</span>
                    </a>
                </li>
                <li class="disabled" data-trick-selectable="true">
                    <a href="#" onclick="return editSingleUser();">
                        <span class="glyphicon glyphicon-edit danger"></span>
                        <span th:text="#{label.action.edit}">Edit</span>
                    </a>
                </li>
                <li class="disabled pull-right" data-trick-selectable="true">
                    <a href="#" class="text-danger" onclick="return deleteUser();">
                        <span class="glyphicon glyphicon-remove"></span>
                        <span th:text="#{label.action.delete}">Delete</span>
                    </a>
                </li>
            </ul>
            <table class="table table-striped table-hover table-condensed">
                <thead>
                    <tr>
                        <th></th>
                        <th><span th:text="#{label.user.login}">Username</span></th>
                        <th><span th:text="#{label.user.first_name}">Firstname</span></th>
                        <th><span th:text="#{label.user.last_name}">Lastname</span></th>
                        <th><span th:text="#{label.user.email}">Email address</span></th>
                        <th class="text-center"><span th:text="#{label.user.account.status}">Status</span></th>
                        <div th:if="${enabledOTP}">
                            <th class="text-center"><span th:text="#{label.user.account.otp}">OTP</span></th>
                        </div>
                        <th class="text-center"><span th:text="#{label.user.connexion.type}">Authentication type</span></th>
                        <th><span th:text="#{label.user.account.role}">Roles</span></th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="user : ${users}" th:classappend="${enabledOTP and not user.forcedOTP and not user.using2FA} ? 'warning'">
                        <td>
                            <input type="checkbox" class="checkbox" onchange="return updateMenu(this,'#section_user','#menu_user');" />
                        </td>
                        <td><span th:text="${user.login}">Username</span></td>
                        <td><span th:text="${user.firstName}">Firstname</span></td>
                        <td><span th:text="${user.lastName}">Lastname</span></td>
                        <td><span th:text="${user.email}">Email</span></td>
                        <td class="text-center">
                            <span th:text="#{label.user.account.state_${user.enable ? 'enabled' : 'disabled'}}">Enabled</span>
                        </td>
                        <div th:if="${enabledOTP}">
                            <td class="text-center">
                                <span th:switch="${user.forcedOTP}">
                                    <span th:case="${true}" th:text="#{label.action.forced}">Forced</span>
                                    <span th:case="${false}" th:text="#{label.action.${user.using2FA ? 'enable' : 'disable'}}">
                                        <span th:text="${user.using2FA ? 'Enabled' : 'Disabled'}">Status</span>
                                    </span>
                                </span>
                            </td>
                        </div>
                        <td data-trick-real-value="${user.connexionType}" class="text-center">
                            <span th:switch="${user.connexionType}">
                                <span th:case="-1" th:text="#{label.user.connexion.standard}">Standard</span>
                                <span th:case="0" th:text="#{label.user.connexion.both}">Both</span>
                                <span th:case="1" th:text="#{label.user.connexion.ldap}">LDAP</span>
                            </span>
                        </td>
                        <td>
                            <div th:each="role : ${user.roles}" style="padding: 2px 4px; border: 1px solid #dddddd; text-align: center; border-radius: 2px; background-color: #eeeeee; display: inline-block;">
                                <span th:text="#{label.role.${#strings.toLowerCase(#strings.replace(role.type, 'ROLE_', ''))}}">Role</span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div th:if="${#lists.isEmpty(users)}">
            <button class="btn btn-default" onclick="newUser();">
                <span th:text="#{label.menu.action.add}">Add new user</span>
            </button>
            <h4><span th:text="#{label.user.empty}">No users exist</span></h4>
        </div>
    </div>
</div>
